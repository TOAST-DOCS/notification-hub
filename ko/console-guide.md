Notification Hub > 콘솔 사용 가이드

# 본인 인증

Notification Hub 사용을 위해서는 본인 인증이 필요합니다. 본인 인증에 대한 자세한 내용은 '사용 전 준비 사항 > 본인 인증' 항목을 참고 부탁드립니다.

* [본인 인증 바로가기](./preconditions#identity-verification)


# 발신 정보

## 발신번호 관리

SMS, LMS, MMS 메시지를 보내기 위해서는 발신번호 등록이 필요합니다. 발신번호를 등록 심사를 요청하고 심사가 승인되면 발신번호가 등록됩니다.

1. **+발신번호 등록** 버튼을 클릭하고 **개인정보 수집 이용 동의서**에 동의합니다.
2. 등록할 발신번호 타입을 선택하고 발신 번호를 입력합니다.
3. 발신번호 타입에 필요한 서류를 첨부합니다.

발신번호 사전 등록제에 대한 자세한 내용은 '사용 전 준비 사항 > 발신번호 사전 등록제' 항목을 참고 부탁드립니다.

* [발신번호 사전 등록제 바로가기](./preconditions#sender-phone-number-pre-registration)

## 브랜드 관리

RCS 메시지를 발송하기 위해서는 브랜드 연동이 완료되어야 합니다. RCS Biz Center에서 사전 등록 사항이 완료(브랜드 승인)되었다면, NHN Cloud 콘솔과 연동을 진행합니다. RCS Biz Center에서 브랜드 생성은 **사용 전 준비 사항** > **RCS** 항목을 참고 부탁드립니다.

* [사용 전 준비 및 제한 사항 > RCS 바로가기](./preconditions/preconditions-rcs)
* [RCS Biz Center 바로가기](https://www.rcsbizcenter.com/main)

RCS Biz Center에서 브랜드 생성 및 대행사 설정, 대화방(발신번호) 등록, 템플릿 등록이 완료(승인)되었으면 콘솔에서 브랜드를 연동합니다.

* **+브랜드 연동** 버튼을 누르면 동기화가 완료됩니다.

## 도메인 관리

이메일을 보내기 위해서는 자신이 소유한 도메인, SPF 인증, DKIM 인증, DMARC 인증이 필요합니다. 

발신 도메인 및 SPF, DKIM, DMARC에 대한 자세한 내용은 **사용 전 준비 및 제한 사항** > **이메일**를 확인 부탁드립니다.

* [사용 전 준비 및 제한 사항 > 이메일](./preconditions/preconditions-email)

### 메일 도메인 등록 및 소유권 인증

도메인을 등록하고 도메인 소유권을 확인해야 합니다. Notification Hub에서 제공한 값을 메일 도메인 DNS TXT 레코드에 등록합니다. 제공된 값이 등록한 도메인의 TXT 레코드와 일치 여부로 소유권을 인증합니다.

1. **+도메인 등록** 버튼을 클릭합니다.
2. 등록할 루트 도메인을 입력하고 **검증** 버튼을 클릭합니다. 
3. 검증이 성공하면 등록 버튼을 클릭해 등록을 마칩니다.
4. 도메인 목록에서 도메인 소유 인증 상태의 **인증** 버튼을 클릭합니다.

도메인 소유 인증이 성공하면 도메인 인증 상태가 완료로 변경됩니다.

### DKIM 인증

DKIM(DomainKeys Identified Mail)은 이메일 발송 서버가 이메일을 디지털 서명하고 이메일 수신 서버는 발신자 진위 여부를 확인하여 전송 중에 메시지가 위조, 변조되지 않았는지 확인하는 이메일 검증 방법입니다. DKIM을 통해 스팸 발송자 및 기타 악의적인 공격자가 이메일을 위조, 변조하는 것을 방지할 수 있습니다.

1. 도메인 소유 인증 완료 후 목록에서 도메인을 체크하고 **DKIM 설정** 버튼을 클릭합니다. 
2. DKIM 인증을 위해 제공된 DNS 호스트 이름에 TXT 레코드 값을 설정하고 아래 **인증** 버튼을 클릭합니다.
    * 등록한 도메인이 `example.com`인 경우, `toast._domainkey.example.com` TXT 레코드에 값을 설정해야 합니다.
3. 인증이 완료 후 사용 설정을 하고 **저장** 버튼을 클릭해 DKIM 인증을 완료합니다.

DKIM에 대한 자세한 설명은 아래 문서 참고 부탁드립니다.
* [이메일 보안 강화 기능 소개 - 도메인 보호, DKIM, DMARC 바로가기](https://meetup.nhncloud.com/posts/248)

### SPF 인증

SPF(Sender Policy Framework)는 이메일 발신자와 발송 서버의 신뢰성을 검증하기 위한 메커니즘으로, 이메일 수신 서버가 특정 도메인에서 발송된 메일이 실제로 허가된 이메일 발송 서버에서 왔는지 확인합니다. 메일 수신 서버는 발신자의 이메일 도메인 DNS에 등록된 SPF 레코드를 확인하여 등록되지 않은 IP 주소에서 보낸 메일을 스팸 메일로 처리합니다.

#### SPF
```
v=spf1 include:_spfblocka.toast.com ~all
```

1. 위 **SPF** 항목의 SPF 레코드를 도메인 TXT 레코드에 등록합니다.
2. 목록에서 도메인을 선택합니다. 
3. **SPF 레코드 인증 상태** 항목의 **상태 확인** 버튼을 클릭해 SPF 인증을 완료합니다.


#### 주의 사항
* 도메인 TXT 레코드에는 하나의 SPF 레코드만 등록해야 합니다. 도메인 TXT 레코드에 2개 이상 SPF 레코드가 등록된 경우, SPF 인증이 실패해 이메일 수신 서버가 수신을 거부할 수 있습니다.
    * [RFC 4408  - 4.5 Selecting Records  바로가기](https://datatracker.ietf.org/doc/html/rfc4408#section-4.5)
* SPF 레코드를 검사할 때 DNS 조회를 발생시키는 메커니즘(include)과 수정자(redirect)의 사용은 최대 10개로 제한되며, 이를 초과하면 이메일 수신 서버에서 수신을 거부할 수 있습니다.
    * [RFC 4408  - 10.1 Processing Limits 바로가기](https://datatracker.ietf.org/doc/html/rfc4408#section-10.1)



SPF(Sender Policy Framework)에 대한 자세한 설명은 아래 문서 참고 부탁드립니다.
* [Email 보안 강화 기능 소개(SPF) 바로가기](https://meetup.nhncloud.com/posts/244)


### DMARC 인증

DMARC(Domain-based Message Authentication Reporting and Conformance)는 이메일 보안 강화 가능의 마지막 단계입니다. 이메일 스푸핑을 이용한 피싱, 사기 등을 막기 위한 도메인 기반 메시지 인증에 대한 보고 및 준수 정책입니다. 이메일 수신 서버는 발송자 주소 (From) 도메인의 DNS에서 DMARC 레코드를 조회합니다. DMARC 레코드에 정의된 정책에 따라 수신 서버는 수신된 메일을 인증합니다.

#### DMARC
```
"v=DMARC1;p=none;sp=quarantine;pct=100;rua=mailto:${보고서를_수신할_이메일_주소}"
```

1. 위 **DMARC** 항목의 값에 DMARC 보고서를 수신할 이메일 주소를 추가해 DMARC TXT 레코드를 완성합니다.
2. `_dmarc.`가 추가된 서브 도메인 TXT 레코드에 등록합니다.
    * 예) 도메인이 `example.com`인 경우 `_dmarc.example.com`의 TXT 레코드에 등록합니다.
3.  **DMARC 인증 상태** 항목의 **상태 확인** 버튼을 클릭해 DMARC 인증을 완료합니다.

DMARC에 대한 자세한 설명은 아래 문서 참고 부탁드립니다.
* [이메일 보안 강화 기능 소개 - 도메인 보호, DKIM, DMARC 바로가기](https://meetup.nhncloud.com/posts/248)

### 도메인 보호

도메인 보호가 활성화된 도메인은 다른 프로젝트에서 사용할 수 없습니다. 보호가 된 도메인을 다른 프로젝트에서 사용하기 위해서는 동일하게 도메인 등록과 소유 인증을 받아야 합니다. 

#### 주의 사항

도메인 보호를 비활성화 하는 경우, 다른 프로젝트에서 임의로 도메인을 사용할 수 있습니다. 모든 인증을 완료한 도메인의 경우, 다른 프로젝트에서 발송하는 메일도 동일하게 이메일 수신 서버에서 정상적으로 수신이 됩니다. 이렇게 발송된 이메일이 스팸이거나 피싱인 경우, 수신자에게 피해가 발생할 수 있고 도메인의 평판이 하락해 수신 이베일 서버에서 수신을 거부할 수 있습니다.

## 푸시 인증 관리

푸시 인증 정보 발급 방법은 **사용 전 준비 및 제한 사항** > **푸시**를 확인 부탁드립니다.

* [사용 전 준비 및 제한 사항 > 푸시](./preconditions/preconditions-push)

### FCM 인증 설정
* **서비스 계정 키 등록**을 활성화 합니다.
* 서비스 계정 키(JSON)에 발급 받은 FCM Service Account Credential 파일의 내용을 복사해 붙여 넣습니다.
* **검증** 버튼과 **저장** 버튼을 클릭해 설정을 완료합니다.

### APNS 인증 설정
* **APNS JWT 인증서 등록**을 활성화 합니다.
* **팀 아이디**와 **키 아이디**를 입력합니다.
* **토픽**을 입력합니다. 토픽은 앱의 번들 아이디(Bundle ID)입니다.
* **개인 키** 파일의 내용을 복사해 붙여 넣습니다.
* **검증** 버튼과 **저장** 버튼을 클릭해 설정을 완료합니다.

### ADM 인증 설정
* **자격 증명 등록**을 활성화 합니다.
* **클라이언트 아이디**와 **클라이언트 키**를 입력합니다.
* **검증** 버튼과 **저장** 버튼을 클릭해 설정을 완료합니다.

<span id="ktb-sender-profile"></span>

## 발신프로필 관리

알림톡이나 친구톡 발송을 위해서는 발신프로필 생성 및 등록이 필요합니다.

발신프로필 생성은 카카오 비즈니스에서 진행할 수 있습니다.

* [발신프로필 생성 가이드 바로가기](./preconditions#ktb-sender-profile)


카카오 비즈니스에서 발신프로필이 생성 완료되면 다음 순서에 따라 등록합니다.

* **+발신프로필 등록** 버튼을 클릭하고 발신프로필 아이디, 관리자 휴대폰 번호, 카테고리를 설정 후 **토큰 요청** 버튼을 클릭합니다.
* 관리자 휴대폰으로 전송된 토큰을 입력하고 **확인** 버튼과 **등록** 버튼을 클릭하면 발신프로필 등록이 완료됩니다.

## 080 수신거부 번호 관리

080 수신거부 번호는 광고 문자 발송 시, 수신자에게 수신거부를 제공하는 서비스입니다. 광고성 정보 전송 시, 수신자가 수신거부나 수신 동의의 철회를 무료로 할 수 있도록 무료 수신거부 방법을 반드시 기재해야 합니다.

### 가입 신청

* **+080 수신거부 번호 신청** 버튼을 클릭하고 회사명을 입력합니다. 입력한 회사명은 080 수신거부 번호로 전화를 걸 때, 안내되는 업체명입니다.
* 가입 신청을 완료하면 등록 예약 상태로 변경됩니다. 080 수신거부 서비스 개통은 영업일 기준 3~4일이 소요되고, 개통이 완료되면 사용할 수 있습니다.
* 개통이 완료되면, 사용 시작 일시와 상태를 확인할 수 있습니다. 080 수신거부 서비스 등록 예약, 사용 중 상태에서 SMS 상품 이용 종료를 할 수 없습니다. 해지 후, 상품 이용 종료가 가능합니다. 해지를 원하시면 해지 버튼을 누르면 해지됩니다.

### 광고성 문자 발송 시 080 수신거부 번호 설정

* 080 수신거부 번호가 계통된 상태에서만 광고 문자를 발송할 수 있습니다.
* **발송** > **SMS** 탭에서 발송 목적을 광고로 선택하면 080 수신거부 번호 선택 창이 나옵니다.
* 선택 적용 버튼을 누르면, 광고성 필수 문구를 추가할 수 있습니다.
* 광고성 발송 시 메시지 본문에 반드시 광고성 필수 문구가 포함되어야 하며 규칙은 다음과 같습니다.
    * 시작 문구: (광고)
    * 마지막 문구: 무료수신거부 {080수신거부번호} 또는 무료거부 {080수신거부번호} (해당 문구에는 공백이 포함될 수 있습니다.)

#### 예시
```
(광고)

[무료 수신거부]080XXXXXXX
```
```
(광고)

무료거부 080XXXXXXX
```

<span id="template"></span>

# 템플릿

자주 사용하는 메시지나 일정한 형식을 요구하는 메시지를 템플릿으로 저장해두고 발송 시 저장해둔 템플릿을 설정해 메시지를 발송할 수 있습니다. 예를 들어, 고객 지원, 공지사항, 알림 또는 마케팅 메시지와 같이 자주 사용하는 메시지의 형식을 템플릿으로 만들어 놓으면, 매번 같은 내용을 작성할 필요 없이 일부 정보만 수정하여 발송할 수 있습니다. 

## 카테고리
* 먼저 루트 카테고리를 선택하고 **+카테고리 추가** 버튼을 클릭해 카테고리를 생성합니다.
* 카테고리는 선택된 카테고리 하위에 생성됩니다.

## 템플릿
* 템플릿이 속할 카테고리를 선택하고 **+템플릿 등록** 버튼을 클릭합니다. 템플릿 작성 페이지로 이동되고 선택된 메시지 채널의 추가 설정들이 표시됩니다.
* 제목과 내용 및 각 메시지 채널에서 요구하는 설정을 마치고 **등록** 버튼을 클릭합니다.

### 알림톡 템플릿

알림톡 템플릿은 등록 요청 후 카카오의 검수 승인을 받아야 사용할 수 있습니다.

* 등록 가능한 메시지 유형으로는 채널추가형, 기본형, 부가정보형, 복합형이 있습니다.
* 등록 가능한 강조 유형으로는 강조 표기형, 이미지형, 아이템리스트형이 있습니다.
* 발송을 원하시는 유형을 선택하여 템플릿을 작성해 주시면 됩니다.


* 카카오 알림톡 가이드
    * [[알림톡 제작가이드]](https://kakaobusiness.gitbook.io/main/ad/bizmessage/notice-friend/content-guide), [[알림톡 심사가이드]](https://kakaobusiness.gitbook.io/main/ad/bizmessage/notice-friend/audit), [[알림톡 화이트리스트]](https://kakaobusiness.gitbook.io/main/ad/bizmessage/notice-friend/audit/white-list), [[알림톡 블랙리스트]](https://kakaobusiness.gitbook.io/main/ad/bizmessage/notice-friend/audit/black-list)
* 발신프로필 / 그룹
    * 템플릿을 등록할 발신 프로필 또는 발신 프로필 그룹을 선택합니다. 그룹에 등록할 경우 그룹에 포함된 모든 발신 프로필이 해당 템플릿을 사용할 수 있습니다.
    * 발신프로필/그룹에 동일한 템플릿코드가 존재할 경우 발신프로필에 등록된 템플릿이 우선 발송됩니다.
    * 발신 프로필 그룹의 경우, 메시지 유형 중 "채널추가형, 복합형"으로는 템플릿을 등록할 수 없습니다.
* 템플릿 코드 / 템플릿 이름
    * 하나의 발신프로필/그룹에 동일한 템플릿코드와 템플릿 이름을 중복해서 등록할 수 없습니다.
* 템플릿 내용
    * 알림톡은 한/영 구분 없이 변수 및 URL , 띄어쓰기, 버튼명 모두 포함하여 1,000자까지 작성 가능합니다. 변수를 입력하여 등록하시는 경우 치환 될 내용도 함께 고려하여 템플릿을 작성바랍니다.<br/> 글자수 상세 가이드는 [알림톡 템플릿 유의사항](https://docs.nhncloud.com/ko/Notification/KakaoTalk%20Bizmessage/ko/alimtalk-overview/#_3)에서 확인 바랍니다.
    * 변수를 #{변수} 형태로 작성합니다. (예 : #{홍길동}님의 택배가 금일 (#{09:50})에 배달될 예정입니다.)
    * 버튼 등록시 버튼명은 변수 입력이 불가하며, 버튼 url에는 변수 입력이 가능합니다. (예. http://kakao.com/#{변수})
    * 버튼 url 등록시 url_mobile, url_pc 링크에는 'http://', 'https://'가 포함되어야 하며 scheme_ios, scheme_android 링크는 스킴 형태에 맞게 등록해야 합니다. 그렇지 않을 경우 템플릿 등록이 불가합니다.
* 보안 템플릿 여부
    * 템플릿 보안 시 모바일 외의 디바이스에서 메시지 내용이 노출되지 않습니다.(‘모바일에서 확인해주세요‘ 문구 노출) 
    * 일반 메시지인 경우, 검수 시 설정 값이 변경될 수 있으며 OTP, 인증번호, 비밀번호, 신용정보/등급 변경 안내 템플릿은 반드시 보안 체크해 주시기 바랍니다.

### 알림톡 템플릿 버튼
* 1개의 템플릿에는 **최대 5개의 버튼**을 등록하실 수 있습니다.
* 바로연결
    * 배송 조회 및 플러그인 타입을 사용할 수 없으며, 이밖에 다른 타입은 버튼과 동일하게 사용할 수 있습니다.
    * 한 템플릿 당 최대 10개까지 사용하실 수 있으며, 바로연결 사용시에는 버튼의 갯수는 2개로 제한됩니다.

| 버튼 종류 | 설명 |
| --- | --- |
| 배송 조회 | - 택배사 배송조회 페이지로 이동합니다.<br/> - 배송조회 버튼을 지원하는 택배사, 택배사별 송장번호 패턴을 확인합니다. [[알림톡 배송조회 송장번호 패턴 안내]](https://www.nhncloud.com/kr/support/notice/detail/1455)|
| 웹 링크 | - 모바일 또는 PC 웹페이지로 이동합니다.<br/> - URL 링크를 변수로 설정하실 수 있습니다. |
| 앱 링크 | - 커스텀스킴으로 앱을 실행합니다.<br/> - Android와 iOS에서 실행할 커스텀 스킴을 각각 설정해 주셔야합니다. |
| 봇 키워드 | - 버튼 이름이 상담원에게 전달됩니다.<br/> - 상담톡을 지원하지 않는 채널이 해당 버튼을 추가하면 알림톡 발송이 불가합니다. |
| 메시지 전달 | - 버튼 이름, 메시지 본문이 상담원에게 전달됩니다.<br/> - 상담톡을 지원하지 않는 채널이 해당 버튼을 추가하면 알림톡 발송이 불가합니다. |
| 상담톡 전환 | - 상담톡에 연결됩니다.<br/> - 상담톡을 지원하지 않는 채널이 해당 버튼을 추가하면 알림톡 발송이 불가합니다. |
| 봇 전환 | - 챗봇이 호출됩니다.<br/> - 상담톡을 지원하지 않는 채널이 해당 버튼을 추가하면 알림톡 발송이 불가합니다. |
| 채널 추가 | - 알림톡을 발송한 채널을 추가합니다. 노출 위치는 첫번째 버튼으로만 사용 가능합니다.<br/> - 이미 채널이 추가되어있을 경우 수신자에게 표시되지 않습니다. |
| 이미지 보안 전송 플러그인 | - 채팅창 내에서 민감한 정보가 포함된 이미지를 암호화하여 전송합니다.<br/> - 비즈플러그인 생성이 필요합니다. [[비즈플러그인 가이드]](https://business.kakao.com/info/talkbizplugin/) |
| 개인정보이용 플러그인 | - 채팅창 내에서 회원가입 없이 서비스 제공에 필요한 개인정보 수집동의를 받습니다.<br/> - 비즈플러그인 생성이 필요합니다. [[비즈플러그인 가이드]](https://business.kakao.com/info/talkbizplugin/) |
| 원클릭 결제 플러그인 | - 채팅창 내에서 화면 전환 없이 사용자가 상품을 결제할 수 있습니다.<br/> - 결제 플러그인은 아직 플랫폼에서 바로 등록이 지원되지 않아 [카카오 고객센터](https://cs.kakao.com/helps?service=127&category=572&locale=ko)에 문의 부탁드립니다. | 
| 비즈니스폼 | - 비즈니스폼을 생성하여 현재 채널과 연결한 경우, 버튼 클릭 시 설정한 비즈니스폼이 호출됩니다.<br/> - 비즈니스폼 생성이 필요합니다. [[비즈니스폼 가이드]](https://business.kakao.com/info/talkbizform/)

### 템플릿 검수
알림톡 템플릿의 검수 및 심사는 카카오에서 직접 진행하며, 검수 요청 후 영업일 기준 2일 이내 순차적으로 처리됩니다.

* 템플릿 문의 등록
    * 검수 요청 전 카카오 검수 담당자에게 전달하실 의견이 있다면 문의 등록란에 문의할 내용을 입력합니다. 요청/승인 상태의 템플릿은 문의할 수 없습니다.(<b><span style="color:red">검수중/반려</span></b> 상태의 템플릿만 문의 등록할 수 있습니다.)
    * 등록한 문의는 검수 결과에 추가되며, 카카오 검수 담당자가 이를 확인합니다.
    * 검수 결과에 템플릿 용도에 관한 문의, 반려 사유 내용이 추가됩니다.
    * 템플릿 반려 시 **문의 등록** 및 **수정**을 클릭해 재검수할 수 있습니다.

### 템플릿 상태
* 템플릿 등록 시, **요청 > 검수 중 > 승인/반려** 상태의 순서로 업데이트됩니다.
* 템플릿 등록 후, 1년간 동일한 상태로 유지되거나 추가 발송이 없는 경우 **휴면** 상태로 전환됩니다. 관련 가이드는 [알림톡 템플릿 유의사항](https://docs.nhncloud.com/ko/Notification/KakaoTalk%20Bizmessage/ko/alimtalk-overview/#_3)에서 확인 바랍니다.

### 템플릿 수정
* **승인/반려** 상태의 템플릿만 수정할 수 있습니다.
* 승인된 템플릿을 수정한 후 검수가 완료되면, 기존 템플릿 내용이 수정한 내용으로 대체됩니다.
* 발신 프로필/그룹 및 템플릿 코드는 수정할 수 없습니다.
* 수정한 템플릿은 **검수 중** 상태부터 다시 검수가 진행됩니다.

### 템플릿 삭제
* <b><span style="color:red">요청/반려</span></b> 상태의 템플릿만 삭제할 수 있습니다.
* 반려된 템플릿은 **삭제** 후, 재등록할 수 있습니다.
* 삭제된 템플릿 코드는 재사용할 수 있습니다.


<span id="flow"></span>

# 플로우

플로우는 다양한 메시지 채널로 메시지를 수신 결과에 따라 순서대로 발송하는 기능입니다. 예를 들어, 공지 사항을 푸시, 이메일, 문자 순으로 수신 결과에 따라 순서대로 발송을 하면 발송 비용을 절약하면서 수신율을 높일 수 있습니다.

* **+플로우 생성** 버튼을 클릭합니다.
* 플로우 이름을 입력하고 발송 목적을 선택합니다.
* 설정한 발송 목적에 따라 선택할 수 있는 메시지 채널과 템플릿이 정해집니다.
    * 발송 목적이 광고이면 알림톡을 사용할 수 없습니다.
    * 발송 목적이 일치하는 템플릿만 선택할 수 있습니다.
* **+** 버튼을 클릭해 플로우 단계을 추가합니다.
* 추가된 플로우 단계를 드래그해서 발송 순서를 조정하고 메시지 채널을 선택합니다.
* 템플릿 이름 컬럼에서 **선택** 버튼을 클릭하고 플로우에 사용할 템플릿을 선택할 수 있습니다.


<span id="message"></span>

# 발송

발송 전 발송할 메시지 채널에 대한 발신 정보가 등록되어 있어야 합니다.


## 플로우 

플로우 발송을 하기 위해서는 등록된 플로우가 있어야 합니다.


* 플로우를 선택합니다.
* 수신자를 설정합니다. 수신자 설정 방법은 직접 입력, 주소록에서 선택, 파일 업로드가 있습니다.
    * 직접 입력, 주소록에서 선택인 경우, 수신자 설정 시 템플릿 치환자를 같이 입력합니다.
    * 파일 업로드인 경우, 수신자 정보와 템플릿 치환자를 파일에 입력해야 합니다.
    * 수신자 설정은 아래에서 자세히 다룹니다.
* 통계 키를 설정합니다.
* 발송 시점을 설정합니다. 예약 발송인 경우, 발송 일시를 설정합니다.
    * 예약 발송 시점은 발송 시점으로 부터 최대 30일 이내로 설정이 가능합니다. 
* **발송** 버튼을 클릭해 메시지를 발송합니다.


## 개별 메시지 채널 발송

* 템플릿 여부를 선택하고, 템플릿을 사용하는 경우, 템플릿을 선택합니다.
    * 알림톡, 친구톡은 발신프로필을 선택하고 발신프로필에 등록된 템플릿을 선택합니다.
* 수신자를 설정합니다. 수신자 설정 방법은 직접 입력, 주소록에서 선택, 파일 업로드가 있습니다.
    * 직접 입력, 주소록에서 선택인 경우, 수신자 설정 시 템플릿 치환자를 같이 입력합니다.
    * 파일 업로드인 경우, 수신자 정보와 템플릿 치환자를 파일에 입력해야 합니다.
    * 수신자 설정은 아래에서 자세히 다룹니다.
* 템플릿을 사용하지 않으면 메시지 제목과 내용을 작성합니다.
    * 메시지 채널 별 제목, 내용 작성 방법은 아래에서 자세히 다룹니다.
* 발송 시점을 설정합니다. 예약 발송인 경우, 발송 일시를 설정합니다.
    * 예약 발송 시점은 발송 시점으로 부터 최대 30일 이내로 설정이 가능합니다.
* **발송** 버튼을 클릭해 메시지를 발송합니다.

## 수신자 설정 방법

### 수신자 직접 입력과 주소록에서 수신자 선택

* 플로우 발송은 플로우에 설정된 메시지 채널에 대한 연락처가 모두 채워져야 발송이 가능합니다.
* 플로우 발송에서 직접 입력은 플로우에 설정된 메시지 채널에 대한 수신자의 연락처를 모두 입력합니다.
* 플로우 발송에서 주소록에서 수신자 선택은 플로우에 설정된 메시지 채널에 대한 수신자의 연락처가 모두 설정된 수신자만 선택할 수 있습니다.
* 개별 메시지 채널 발송인 경우, 메시치 채널에 해당하는 연락처를 입력합니다.
* 푸시 토큰은 푸시 유형과 단말기에서 생성된 토큰을 입력합니다.

### 파일 업로드

* 수신자 연락처 목록 파일의 템플릿을 다운로드합니다.
* 행은 수신자를 의미하고 열은 수신자의 연락처입니다.
* 푸시 토큰 열은 연락처 타입과 토큰으로 구성된 JSON 객체입니다. 수신자 한 명당 6개까지 입력이 가능합니다. 


수신자 연락처 목록 파일의 템플릿 구조는 다음과 같습니다.

| contactPhoneNumber | contactEmailAddress | contactTokenJson1..6 | 
| - | - | - | 
| 수신자 휴대폰 번호 | 수신자 이메일 주소 | {"contactType": "연락처_타입", "contact": "푸시_토큰" } |

## 메시지 제목과 내용 작성 방법

### SMS
* 발신 번호, 발송 목적을 선택합니다 발송 목적이 광고인 경우, 080 수신거부 번호를 선택합니다.
* 발송 유형을 선택합니다. 발송 유형은 SMS(단문), LMS(장문), MMS(미디어 장문)가 있습니다.
* SMS, LMS, MMS 공통적으로 입력할 수 있는 문자 집합은 EUC-KR 입니다.
    * [위키백과 EUC-KR 바로가기](https://ko.wikipedia.org/wiki/EUC-KR)
* SMS는 최대 90 bytes로, 한글 45자, 영문 90자까지 입력할 수 있습니다.
* LMS와 MMS는 최대 2,000 bytes로, 한글 1,000자, 영문 2,000자까지 입력할 수 있습니다.
* MMS는 이미지를 첨부할 수 있습니다.
* 발신 번호 차단으로 문자 전송에 실패한 경우에는 '번호 도용 문자 차단 서비스'를 확인 바랍니다. 
    * [번호 도용 문자 차단 서비스 가이드 바로가기](./preconditions/preconditions-sms#fraud-number)
* 전송 결과는 성공이지만 문자를 수신하지 못하는 경우는 '통신사 스팸 차단 서비스'를 확인 바랍니다.
    * [통신사 스팸 차단 서비스 가이드 바로가기](./preconditions/preconditions-sms#spam-number)

#### MMS 첨부 가능한 이미지 규격

* MMS 최대 크기: 1000*1000 이하 파일
* MMS 지원 규격: 1개당 300KB 이하, 이미지의 개수가 3개일 경우 합산 800KB 이하/ .jpg, .jpeg 파일


### 국제 SMS
국제 SMS는 인코딩과 글자 수에 따라 연결된 메시지(Concatenated Message)로 전송됩니다.

* 연결된 메시지란, 국제 SMS 발송에서 보낼 수 있는 문자 수 제한을 극복하기 위해, 국내 LMS처럼 단말기에 하나의 긴 문자로 연결되어 보이게 만드는 서비스입니다.
본문 글자 수, 인코딩 및 해외 통신사의 지원 여부에 따라 연결된 메시지 기능이 제공되거나 제한됩니다. 
* 연결된 메시지가 지원되지 않는 경우 단문 메시지 여러 건으로 단말기에 수신될 수 있습니다.
* 연결된 메시지가 만들어지는 과정에 추가되는 헤더가 메시지 연결을 위해 메시지 본문의 공간(대략 6 bytes)을 차지해 입력 가능한 글자 수가 줄어듭니다. 
* 요금은 연결된 메시지 건수에 따라 과금됩니다.  

| 인코딩 | 1건 과금 | 2건 과금 | 3건 과금 | 4건 과금 | 5건 과금 |
| --- | --- | --- | --- | --- | --- |
| UCS-2<br>(유니코드) | 70자 | 134자<br>(=67*2) | 201자<br>(=67*3) | 268자<br>(=67*4) | 335자<br>(=67*5) |
| GSM-7bit | 160자 | 306자<br>(=153*2) | 459자<br>(=153*3) | 612자<br>(=153*4) | 765자<br>(=153*5) |


### RCS

* 발신 브랜드와 대화방(발신번호)를 선택합니다.
* 발송 목적을 선택합니다. 광고인 경우, 080 수신거부 번호를 선택합니다.
* 발송 유형을 선택합니다. SMS, LMS, MMS, RCS Biz Center 템플릿이 있습니다.
    * RCS Biz Center 템플릿은 RCS Biz Center에서 사전 등록이 필요합니다.
* SMS는 최대 한글/영문 100자까지 입력할 수 있고, 버튼 1개를 설정할 수 있습니다.
* LMS는 한글, 영문 구분 없이 제목을 최대 30자, 내용을 최대 1,300자까지 입력할 수 있고, 버튼은 최대 3개까지 설정할 수 있습니다.
* MMS는 카드별로 한글, 영문 구분 없이 제목을 최대 30자, 내용을 최대 1,300자까지 입력할 수 있고, 이미지 1개, 버튼은 최대 3개까지 설정할 수 있습니다.
    * MMS는 상세 설정으로 가로형, 세로형, 슬라이드형을 선택할 수 있습니다. 
    * 슬라이드형 선택 시 슬라이드를 최소 3개에서 최대 6개까지 추가할 수 있습니다.
* RCS Biz Center 템플릿에서 프리 템플릿을 선택한 경우, 최대 90자까지 메시지 입력이 가능합니다.

#### RCS 버튼 유형
SMS, LMS, MMS, RCS Biz Center 템플릿 모두 버튼을 추가할 수 있습니다.

* 대화방 열기
    * 설정한 전화번호로 설정한 메시지를 전송합니다.
    * 버튼명을 입력 후 메시지를 전송할 전화번호를 입력합니다.
    * 전송할 메시지 내용을 입력합니다.
* 복사하기
    * 설정한 값이 복사됩니다.
    * 버튼명을 입력 후 버튼 클릭 시 복사될 값을 입력합니다.
* 전화 걸기
    * 설정한 전화번호로 전화를 겁니다.
    * 버튼명을 입력 후 버튼 클릭 시 전화할 전화번호를 입력합니다.
* 지도 보여주기/지도 검색하기
    * 설정한 위치를 지도 앱에서 보여줍니다.
    * 버튼명을 입력 후 위치의 위도, 경도를 입력합니다.
    * 위치명 및 지도 URL을 입력합니다.(ht<span>tps://</span>를 포함한 URL)
* 현재 위치 공유
    * 수신자가 발신자에게 수신자의 현재 위치를 메시지로 전송합니다.
    * 버튼명을 입력합니다.
* URL 연결
    * 웹 링크로 연결됩니다.
    * 버튼명을 입력 후 버튼 클릭 시 연결할 링크를 입력합니다.
    * 링크 입력 시 'http://', 'https://'를 필수 입력해야 합니다.
* 일정 등록
    * 수신자의 일정 앱에 일정을 등록합니다.
    * 버튼명을 입력 후 일정 시작일, 종료일을 선택합니다.
    * 일정 제목 및 일정 내용을 입력합니다.


### 알림톡

* 발신프로필과 발신프로필에 등록된 템플릿을 선택합니다.
* 알림톡은 템플릿 발송만 가능해 내용 입력이 필요 없습니다.

#### 친구톡
* 전송할 내용에 광고성 정보(특가, 할인, 이벤트, 프로모션 홍보 등)가 있을 경우 발송 목적을 광고로 설정합니다.
* 메시지 타입을 선택합니다. 타입별 상세 가이드는 [친구톡 발송 지원 타입](./preconditions/preconditions-ktb#ktb-supported-types)에서 확인하세요.
    * 기본형(텍스트/이미지/와이드 이미지)
        * 텍스트: 한/영 구분 없이 띄어쓰기 포함 1,000자 텍스트+링크 버튼 최대 5(세로 배열)
        * 이미지: 한/영 구분 없이 띄어쓰기 포함 400자 텍스트+이미지 1장+링크 버튼 최대 5(세로 배열)
        * 와이드 이미지: 한/영 구분 없이 띄어쓰기 포함 76자 텍스트+이미지 1장+링크 버튼 1개
    * 와이드 아이템 리스트
        * 1개의 타이틀에 3~4개의 리스트(이미지+아이템)를 추가할 수 있는 광고 타입의 상품입니다.
        * 한/영 구분 없이 띄어쓰기 포함 텍스트 첫 번째 아이템 제목 25자, 2~4번째 아이템 제목 30자+이미지 아이템 3~4개+링크 버튼 최대 2개(가로 정렬)
    * 캐러셀 피드
        * 최대 10개의 이미지와 다양한 텍스트 정보를 담을 수 있는 광고 타입의 상품입니다.
        * 한/영 구분 없이 띄어쓰기 포함 '제목' 20자 텍스트+'문구' 180자 텍스트+'이미지+링크 버튼 2개(가로 정렬)'로 구성된 아이템 최대 10개
    * 프리미엄 동영상
        * 첨부한 동영상이 말풍선에 자동으로 재생되는 유형입니다.
        * 동영상 링크는 카카오TV에 업로드된 영상만 사용 가능합니다(예시: https://tv.kakao.com/v/#{숫자} / https://tv.kakao.com/channel/#{숫자}/cliplink/#{숫자}).
        * 한/영 구분 없이 띄어쓰기 포함 '헤더' 20자 텍스트+'문구' 76자 텍스트+'카카오TV에 업로드된 영상' 1개+링크 버튼 1개
    * 커머스
        * 상품의 가격 및 할인 정보를 강조하여 나타낼 수 있는 말풍선입니다.
        * 한/영 구분 없이 띄어쓰기 포함 '제목' 20자 텍스트+'부가 정보' 34자 텍스트+링크 버튼 최대 2개(가로 정렬)
    * 캐러셀 커머스
        * 다양한 상품의 정보를 카탈로그 형태로 구성할 수 있는 말풍선입니다.
        * 한/영 구분 없이 띄어쓰기 포함 '제목' 30자 텍스트+'부가 정보' 34자 텍스트+링크 버튼 최대 2개(가로 정렬)로 구성된 아이템 최대 10개
        * 캐러셀 커머스에 사용되는 모든 이미지는 동일한 비율이어야 합니다.
* 이미지가 있을 경우 이미지를 선택합니다.
    * 메시지에 이미지를 첨부하려면 먼저 **상세 설정** > **첨부파일 관리** 탭에서 이미지를 등록해야 합니다.
    * 이미지 링크: 이미지 클릭 시 연결되는 링크를 입력합니다.(http://, https://를 포함한 URL)
    * 캐러셀 커머스에 사용되는 모든 이미지는 동일한 비율이어야 합니다.
* 웹 링크, 앱 링크, 봇 키워드, 메시지 전달, 상담톡 전환, 봇 전환, 비즈니스폼 버튼을 삽입할 수 있습니다.
    * 기본형 최대 5개, 캐러셀/와이드 아이템 리스트 최대 2개
* 메시지에서 쿠폰을 강조해야 하는 경우 버튼을 사용하여 해당 버튼을 클릭하면 첨부한 쿠폰으로 이동하도록 할 수 있습니다.

### 이메일

* 발송 목적을 선택합니다. 
* 발송 목적을 광고로 선택한 경우, 추가 입력이 필요합니다.
    * 제목이 시작되는 부분에 "(광고)" 문구가 필수적으로 들어가야 합니다.
    * 본문에 전송자의 명칭, 이메일 주소, 전화번호 및 주소를 표시해야 합니다.
    * 수신 거부 링크가 한글/영문 형태로 반드시 들어가야 하며, 수신을 거부할 수 있는 기술적 조치를 해야 합니다.
    * 수신 거부로 등록된 유저는 광고성 메일로 발송 시 발송되지 않습니다.
* 발송 목적을 광고로 선택하면 알림 팝업이 표시되고 수신거부 안내 문구를 설정합니다.
* 발신 주소를 입력합니다. 이름 형식으로 작성하면 발송자 이름과 메일 주소를 입력할 수 있습니다.
    * "발신자 이름<발신 메일>" 형태로 발송하면, 이메일을 받는 사람에게 발신자 이름과 이메일 주소 형식으로 표시됩니다.
* 첨부파일은 직접 업로드와 등록된 파일을 선택해 부합니다.
    * 첨부 파일은 최대 10개까지 업로드 가능하며, 30MB 이하의 파일만 가능합니다.
    * 첨부 파일의 총합은 30MB를 넘어갈 수 없습니다.
    * 최대 30MB까지 첨부 가능하지만 수신하는 이메일 시스템(gmail.com, naver.com 등)의 첨부 파일 제한 정책에 따라 `제한 초과`로 거부되거나 스팸 판정률이 높아질 수 있으므로 10MB 이내로 첨부할 것을 권장합니다.


#### 광고 메일 발송 시 유의 사항

정보통신망법에 따라 상업성 광고 메일이나 업체 홍보 메일을 발송하는 경우, 아래 사항을 준수해야 합니다.([한국인터넷진흥원 관련 내용 확인](https://spam.kisa.or.kr/spam/cm/cntnts/cntntsView.do?mi=1061&cntntsId=1086)) <br>


1. 광고성 메일은 명시적으로 수신 동의를 한 수신자에게만 발송해야 합니다. 이를 위반하여 분쟁이 발생하는 경우 책임은 광고 메일 발송자에게 있습니다.
2. 제목이 시작되는 부분에 "(광고)" 문구가 필수적으로 들어가야 합니다.
3. 본문에 발송자의 명칭, 전자우편주소, 전화번호 및 주소를 포함하는 발송자 정보를 표시해야 합니다.
4. 본문에 수신자가 수신 거부 또는 수신 동의 철회 의사를 쉽게 표시할 수 있도록 하기 위한 안내문을 명시해야 합니다.
5. 수신자가 본문 내에 [수신거부] 등을 눌러 수신 거부 또는 수신 동의 철회 여부를 간편하게 선택할 수 있도록 기술적 조치를 해야 하며, 이 경우 그 안내문과 기술적 조치는 한글과 영문으로 명시해야 합니다.

> 메일 수신을 원치 않으시면 <strong>[수신 거부]</strong>를 클릭하세요. <br>If you do not want to receive it, please click a <strong>[Unsubscription]</strong>


NHN Cloud는 정보통신망법을 준수할 수 있도록, '광고 메일'에 대해 아래와 같은 기술적 조치를 제공합니다.

- 제목에 (광고) 문구를 삽입합니다.
- 수신자가 수신 거부를 선택할 수 있도록 한글과 영문 형태로 수신 거부 기능을 제공합니다.
- 수신 거부 대상 메일 주소에는 광고 메일을 발송하지 않습니다.

#### 수신 거부 링크로 제공하고 있는 키

| 키 | 문구 | 사용 예시 |
|-------------------------| - |-------------------------------------------------------------------------------------------------------------------------------|
| BLOCK_RECEIVER_LINK | [수신거부](#) | 메일 수신을 원치 않으시면 ##BLOCK_RECEIVER_LINK##를 클릭하세요. |
| EN_BLOCK_RECEIVER_LINK | [Unsubscription](#) | If you no longer wish to receive these emails, please click the ##EN_BLOCK_RECEIVER_LINK##. |
| JA_BLOCK_RECEIVER_LINK | [受信拒否](#) | メールの受信を希望しない場合、##JA_BLOCK_RECEIVER_LINK##をクリックしてください。 |
| BLOCK_RECEIVER_LINK_URL | - | If you no longer wish to receive these emails, please `<a href='##BLOCK_RECEIVER_LINK_URL##' target='_blank'>click here</a>`. |


### 푸시

* 발송 목적을 선택합니다.
* 발송 목적을 광고로 선택한 경우, 추가 입력이 필요합니다.
    * 발송 연락처에 대표번호를 입력합니다.
    * 수신 동의 철회 가이드에는 앱에서 푸시 메시지를 수신 거부할 수 있는 방법을 입력합니다.
        * 예) 수신 거부: 설정 > 알림 설정
* 입력 유형을 선택합니다. 입력 유형을 JSON으로 선택하면 전체 내용을 JSON 형식에 맞게 입력해야 합니다.
* HTML 스타일 사용 여부를 선택합니다. 
    * HTML 스타일을 사용하면 안드로이드 단말기에 HTML을 표현할 수 있씁니다.
    * 아이폰(iOS)은 HTML 스타일을 지원하지 않습니다.
    * HTML 스타일을 사용해 메시지를 발송하는 경우, 안드로이드와 아이폰 메시지를 따로 작성해 발송해야 합니다.
* 푸시 메시지에 버튼, 이미지 등을 넣어 다양한 형태로 푸시 메시지를 발송할 수 있습니다.
    * 단말기에서 수신된 푸시 메시지의 버튼, 이미지를 정상적으로 표시하기 위해서는 앱에 SDK 적용이 필요합니다.
        * [Android SDK 바로가기](https://docs.nhncloud.com/ko/nhncloud/ko/nhncloud-sdk/push-android/)
        * [iOS SDK 바로가기](https://docs.nhncloud.com/ko/nhncloud/ko/nhncloud-sdk/push-ios/)
        

#### 버튼

|이름|내용|
|---|---|
| 이름 | 버튼의 이름 |
| 유형 | 버튼의 유형, 응답(REPLY), 앱 열기(OPEN_APP), URL 열기(OPEN_URL), 닫기(DISMISS) |
| 전송 버튼 이름 | 버튼 유형이 응답 버튼이면 iOS에서 전송 버튼 이름을 설정할 수 있습니다. |
| 링크 | 버튼을 눌렀을때 이동하거나 실행할 링크입니다. 버튼 유형이 URL 열기이면 해당됩니다. |
| 힌트 | 버튼에대한 설명입니다. |

#### 버튼의 유형
- 응답
    - 다이렉트 답장 기능을 실행합니다.
    - 사용자가 전송 버튼을 터치했을 때 액션 리스너로 사용자 입력 텍스트가 전달 됩니다.
- 앱 열기
    - 앱이 실행됩니다.
    - 액션 리스너를 통해 메시지 전문이 전달됩니다. 메시지 내에 정보를 입력해 특정 페이지로 이동 등의 기능을 구현할 수 있습니다.
- URL 열기
    - 링크 항목에 입력된 URL(https://...) 혹은 Scheme(scheme://...)을 실행합니다.
    - URL을 입력하면 웹 브라우저가 실행되고 해당 URL을 로드합니다.
    - 스킴(Scheme)을 입력하면 앱에 미리 정의해 둔 스킴을 실행합니다.
- 닫기
    - 해당 알림을 닫습니다.

#### 미디어

|이름|내용|
|---|---|
| 위치 | 미디어의 위치한 곳, 'REMOTE' 또는 'LOCAL' |
| 주소 | 미디어가 위치한 주소, URL, URI 등이 될수 있습니다. |
| 유형 | 이미지, GIF, 동영상, 소리를 선택할 수 있습니다. (Android는 이미지만 가능) |
| 확장자 | 미디어의 확장자 | .png, .avi 등 미디어의 확장자입니다. |
| 펼치기 | 미디어 펼짐 기능, Android에서만 가능합니다. |

#### 미디어 파일 지정
- 외부
    - 입력한 URL에 해당하는 미디어 파일을 다운로드하여 사용합니다.
    - Android
        - Android Pie 이상에서 HTTP를 사용하려면 <a href="http://docs.toast.com/ko/TOAST/ko/toast-sdk/push-android/#android-p">network-security-config</a>를 설정해야 합니다.
    - iOS
        - iOS 9 이상에서 HTTP를 사용하려면 Info.plist 파일내에 ATS(App Trasport Secuirty)를 설정해야 합니다.
        - 실제 미디어 파일의 확장자 정보를 extension 항목에 입력해야 합니다. (예: jpg, png, mp4, wav, ...)
- 내부
    - 앱 내에 포함되어 있는 리소스를 사용합니다.
    - Android
        - 파일은 'res > drawable'에 미리 추가해야 합니다.
        - 리소스 식별자를 통해 접근하므로 메시지 작성시 'richMessage.media.source'에 확장자를 제외한 파일 이름을 입력합니다.
        - Android에서는 파일 이름이 리소스의 식별자로 사용되기 때문에 확장자가 다르더라도 동일한 파일 이름을 사용할 수 없습니다.
        지원하는 이미지 포멧은 png, jpg, gif 입니다. (현재 비디오, 오디오 형식의 미디어는 지원하지 않습니다.)
    - iOS
        - 리소스는 리치 메시지를 생성하는 <a href="http://docs.toast.com/ko/TOAST/ko/toast-sdk/push-ios/#notification-service-extension">Notificaiton Service Extension</a> 프로젝트에 미리 추가해야 합니다.
        - XCode에서 파일 혹은 디렉토리를 'NotificationServiceExtension' 프로젝트에 추가합니다.
        - 'Build Phases > TARGETS'에서 파일이 정상적으로 추가되었는지 확인합니다.
        - 번들 리소스를 통해 접근하므로 확장자를 포함한 전체 파일명이 필요합니다.
        - 메시지 작성시 'richMessage.media.source'에 추가한 파일 이름을 입력합니다.

#### 미디어 유형
- 이미지

| | Android | iOS |
| - | - | - |
| 지원 형식 | JPEG, PNG, GIF | JPEG, PNG, GIF |
| GIF 애니메이션 | 지원 안 함 | 지원함 |
| 파일 크기 | 제한 없음 | 10MB |
| 권장 사항 | 2:1 비율의 가로 이미지 권장<br>Small: 512x256<br>Medium: 1024x512<br>Large: 2048x1024 | 가로 이미지 권장<br>최대 크기: 1038x1038 |

- 동영상

| | Android | iOS |
| - | - | - |
| 지원 형식 | 지원 안 함 | MPEG, MPEG3Video, MPEG4, AVIMovie |
| 파일 크기 | 지원 안 함 | 50MB |

- 소리

| | Android | iOS |
| - | - | - |
| 지원 형식 | 지원 안 함 | WaveAudio, MP3, MPEG4Audio |
| 파일 크기 | 지원 안 함 | 5MB |

#### 큰 아이콘
Android에서만 제공하는 기능입니다. 알림에 큰 아이콘을 지정합니다. 파일 지정 방법은 미디어 파일 지정 방법과 동일합니다.

|이름|내용|
|---|---|
| 위치 | 위치한 곳, 'REMOTE' 또는 'LOCAL' |
| 주소 | 이미지가 위치한 주소, URL, URI 등이 될수 있습니다. |

#### 그룹
Android에서만 제공하는 기능입니다. 알림에 그룹을 설정하고 그룹 키가 동일한 알림은 모아서 표현합니다.

|이름|내용|
|---|---|
| 키 | 그룹의 키 |
| 설명 | 그룹에대한 설명 |

#### 알림음
| | Android | iOS |
| - | - | - |
| 지원 형식 | MP3, PCM/WAVE, Vorbis | Linear PCM, MP4(IMA/ADPCM), μ-law, aLaw |
| 확장자 | .mp3, .wav, .ogg | .aiff, .wav, .caf |
| 플레이 시간 | 제한 없음 | 30 초 |

- 앱 내에 포함되어 있는 리소스만 지정 가능합니다. (외부 URL 사용 불가)
- Android
    - 리소스는 'res > raw' 폴더에 미리 추가해야 합니다.
    - 리소스 식별자를 통해 접근하므로 파일 확장자는 무시됩니다.
    - Android Oreo 미만에서만 동작합니다.
- iOS
    - 리소스는 앱 프로젝트의 번들 리소스로 미리 추가해야 합니다.
    - 번들 리소스를 통해 접근하므로 확장자를 포함한 전체 파일명이 필요합니다.

<span id="contact-delivery-result"></span>

# 발송 조회

발송된 메시지의 수신 결과를 수신자의 연락처 단위로 조회할 수 있습니다.

* 메시지 채널, 발송 시점(즉시, 예약), 발송 목적, 발송/수신/열람 상태를 복합적으로 설정해 연락처 수신 결과를 조회합니다.
* 조회 시 기간은 요청 일시 기준으로 설정합니다.
    * 조회 기간 설정 가능 범위은 기본, 최대 7일입니다.
    * 조회 기간은 최대 180일 전까지 가능합니다.
* 상세 조건 중 하나를 추가적으로 선택해 연락처 수신 결과를 조회할 수 있습니다.
    * 메시지 아이디, 템플릿 이름, 플로우 이름, 통계 키 이름, 발신 정보, 수신자 정보

## 연락처 수신 결과

* 기본적으로 메시지 아이디, 메시지 채널, 요청 일시, 발송 시점, 발신 정보, 발송 상태, 발송 목적, 수신자 정보, 수신 상태가 표시됩니다.
* 조회 필드 추가 설정에서 예약 일시, 발송 일시, 수신 일시, 템플릿 이름, 플로우 이름, 통계 키 이름, 열람 상태, 열람 일시를 선택해 확인할 수 있습니다.
* 발송 목적의 **확인** 버튼을 클릭해 선택된 수신자의 연락처에 대한 발송 결과를 자세히 조회할 수 있습니다.
* 조회된 연락처 수신 결과의 발송 상태가 발송 예약, 발송 대기, 승인 대기인 경우 **선택 취소**, **일괄 취소** 버튼을 클릭해 발송을 취소할 수 있습니다.
    * 발송 상태가 **발송 예약**인 연락처 수신 결과는 아직 발송 예약 시간이 되지 않아 대기 중인 메시지입니다.
    * 발송 상태가 **승인 대기**인 연락처 수신 결과는 발송 승인되지 않아 대기 중인 메시지입니다.
* 조회된 연락처 수신 결과의 발송 상태가 승인 대기인 경우 발송 시점의 **승인** 버튼을 클릭해 발송을 승인합니다.

## 검색 결과 다운로드
조회된 연락처 수신 결과를 파일로 다운로드 할 수 있습니다.

* **검색 결과 다운로드 요청** 버튼을 클릭해 연락처 수신 결과 데이터 추출을 요청합니다.
* **다운로드 요청 목록** 버튼을 클릭해 요청한 목록을 확인하고 추출이 끝나 완성된 파일을 다운로드합니다.
    * 연락처 수신 결과는 개인정보를 포함하고 있기 때문에 다운로드 목적을 입력해야 합니다. 

# 주소록

수신자의 연락처를 등록하고 관리할 수 있습니다.

## 연락처 

* **+연락처 추가** 버튼을 클릭합니다.
* 연락처는 직접 입력과 파일 업로드로 등록할 수 있습니다.
* 수신자 별칭은 수신자를 식별할 수 있는 값입니다. 일반적으로 Notification Hub와 연동된 고객에서 관리하는 수신자(회원)의 식별자를 사용합니다.
    * 주소록 내부적으로 관리되는 수신자 아이디와 다릅니다.
    * 예) 고객 서비스 회원 시스템에 `recipient@example.com` 사용자의 식별자가 `638f11af-5e34-4803-9682-49265b690f69`이면 주소록에서 `638f11af-5e34-4803-9682-49265b690f69`를 수신자 별칭으로 사용할 수 있습니다.
* 토큰은 최대 6개까지 등록할 수 있습니다.
* 그룹은 최대 16개까지 등록할 수 있습니다.


### 연락처 다운로드
저장된 모든 연락처를 파일로 다운로드 할 수 있습니다.

* **연락처 다운로드 요청** 버튼을 클릭해 연락처 수신 결과 데이터 추출을 요청합니다.
* **다운로드 요청 목록** 버튼을 클릭해 요청한 목록을 확인하고 추출이 끝나 완성된 파일을 다운로드합니다.


## 그룹

그룹을 생성해 수신자를 추가하고 수신자들을 그룹화할 수 있습니다.

* **+그룹 추가** 버튼을 클릭합니다.
* 그룹 이름을 입력하고 **확인** 버튼을 클릭해 그룹을 생성합니다.
* 생성된 그룹을 클릭하고 **그룹 연락처 관리** 탭에서 **+그룹 연락처 추가** 버튼을 클릭해 수신자를 그룹에 추가할 수 있습니다.

### 그룹 연락처 다운로드
그룹에 속한 연락처를 파일로 다운로드 할 수 있습니다.

* **그룹 연락처 다운로드 요청** 버튼을 클릭해 연락처 수신 결과 데이터 추출을 요청합니다.
* **다운로드 요청 목록** 버튼을 클릭해 요청한 목록을 확인하고 추출이 끝나 완성된 파일을 다운로드합니다.


## 수신거부 관리

수신 거부된 휴대폰 번호, 이메일 주소, 토큰을 조회하고 관리할 수 있습니다.

### 휴대폰 번호

* **+수신거부 번호 추가** 버튼 아래 **드롭다운**을 통해 080 수신거부 번호를 선택하고 선택된 080 수신거부 번호로 수신 거부된 휴대폰 번호를 조회합니다.
* **+수신거부 번호 추가** 버튼을 클릭해 수동으로 수신거부 목록에 추가할 수 있습니다.

### 이메일

* **+수신거부 이메일 추가** 버튼 아래 **드롭다운**을 통해 이메일 도메인을 선택하고 선택된 이메일 도메인으로 수신 거부된 이메일 주소를 조회합니다.
* **+수신거부 이메일 추가** 버튼을 클릭해 수동으로 수신거부 목록에 추가할 수 있습니다.


### 토큰

* 토큰은 바로 수신 거부한 토큰 목록을 조회할 수 있습니다.
* **+수신거부 이메일 추가** 버튼 아래 **드롭다운**을 통해 이메일 도메인을 선택하고 선택된 이메일 도메인으로 수신 거부된 이메일 주소를 조회합니다.
* **+수신거부 이메일 추가** 버튼을 클릭해 수동으로 수신거부 목록에 추가할 수 있습니다.

### 수신거부 번호/이메일/토큰 다운로드
수신 거부된 연락처를 파일로 다운로드 할 수 있습니다.

* **수신거부 번호/이메일/토큰 다운로드 요청** 버튼을 클릭해 연락처 수신 결과 데이터 추출을 요청합니다.
* **다운로드 요청 목록** 버튼을 클릭해 요청한 목록을 확인하고 추출이 끝나 완성된 파일을 다운로드합니다.


# 상세 설정

각 메시지 채널의 설정과 첨부파일을 관리합니다. 설정 후 실제 반영까지 대략 수분이 걸릴 수 있습니다.

## SMS

### 국제 SMS 설정

#### 국제 SMS 메시지 발송 설정
* 국제 SMS 발송 기능 이용 전 반드시 [[국제 SMS 서비스 정책]](./preconditions/preconditions-international-sms)을 확인합니다.
* 국제 SMS 발송 기능을 사용하지 않으려면 **사용 안함**으로 설정합니다. **사용**으로 되어 있는 경우 국제 SMS 물량 펌핑으로 인한 사고가 발생해 추가적인 요금이 청구될 수 있습니다.
* 국제 SMS 월 발송 건수는 최소 1건에서 최대 10,000건까지 설정할 수 있습니다.  10,000건 초과 발송이 필요한 경우 [[고객 센터]](https://www.nhncloud.com/kr/support/inquiry)로 문의해 주세요.
* 발송 허용 국가 관리
    * 최초 사용 설정 시 지정된 주요 국가만 발송 가능하도록 설정됩니다. **발송 허용 국가** 입력란을 클릭해 발송 허용 국가를 선택합니다.
* 월 발송 건수 및 임계치 알림
    * **월 발송 건수**는 월 1,000건이 기본이며, 최대 10,000건까지 적용 가능합니다.
    * **월 발송 건수**는 보조 기능으로 임계치 초과에 대한 탐지가 실시간으로 반영되지 않을 수 있습니다. 보조 기능의 일부 오차에 대해 NHN Cloud는 책임을 지지 않으니 주의해서 사용하시기 바랍니다.
    * **국제 SMS 발송**을 **사용**으로 설정하면 **월 발송 건수**로 설정한 값의 70%, 100% 도달 시 프로젝트 멤버 전체에게 알림 메일이 발송됩니다.

> [주의]
전 세계적으로 국제 SMS에 대한 어뷰징 사례가 증가하고 있습니다.
월 제한 건수와 발송 국가 지정에 대해서는 반드시 필요한 만큼만 설정하는 것을 권장합니다.
NHN Cloud는 어뷰징으로 발송된 국제 SMS에 대해 일체의 책임을 지지 않습니다.


### 메시지 설정

#### 메시지 중복 발송 차단 시간 설정
* 설정한 시간동안 같은 내용의 메시지가 발송되지 않도록 설정할 수 있습니다.
* 중복 발송 차단 설정을 한 경우 설정된 시간(단위:분) 동안 동일한 요청에 대해 발송 실패 처리됩니다.
* 차단 가능한 최대 시간은 1시간입니다.
* 중복 판단 기준은 다음과 같습니다.
    * 메시지 타입(SMS/LMS/MMS/AUTH), 발신 번호, 수신번호, 제목, 본문, 첨부파일

#### 대체 문자 설정
* 발송 요청의 본문/제목에 EUC-KR 문자 집합에 포함되지 않은, 발송 불가능한 문자가 포함된 경우 발송 가능한 문자로 변환하도록 설정할 수 있습니다.
    * 대표적으로 이모지 문자는 EUC-KR 문자 집합에 포함되지 않습니다.
* 대체 문자로 물음표 '?'와 공백 ' '을 선택할 수 있습니다.
* 대체 문자 설정을 사용으로 설정하면 발송 불가능한 문자가 설정한 대체 문자로 변환되어 표시됩니다.

### 광고성 메시지 설정
#### 광고성 메시지 발송 시간 제한 설정
* 광고 메시지의 발송 시간을 제한할 수 있습니다.
* 설정된 광고 발송 제한 시간 동안 광고 발송은 진행되지 않습니다.
    * 광고 발송 제한 시작 설정 가능 시간: 18:00~21:00
    * 광고 발송 제한 종료 설정 가능 시간: 08:00~12:00
* 미발송 메시지 처리 방식을 설정할 수 있습니다.
    * 실패 처리
    * 제한 시간 해제 후 재발송
* SMS, RCS의 광고성 메시지 발송 시간 제한 설정은 개별 설정이 필요합니다.

## 친구톡

### 메시지 설정

#### 비즈니스폼 키 발급

친구톡에서 비즈니스폼(예약, 설문, 응모 등의 이벤트) 메시지를 발송하기 위한 키를 발급합니다.

* 비즈니스폼 키 값을 발급받을 수 있습니다.
* 친구톡 메시지 발송 시 비즈니스폼 버튼을 추가할 수 있습니다. 비즈니스폼 버튼 추가 시 비즈니스폼 키 값을 입력해야 합니다.
* 발신프로필을 선택하고 카카오 비즈니스에서 생성한 비즈니스폼 아이디를 입력하고 **발급** 버튼을 클릭해 비즈니스폼 키를 발급합니다.

## RCS

### 광고성 메시지 설정
#### 광고성 메시지 발송 시간 제한 설정
* 광고 메시지의 발송 시간을 제한할 수 있습니다.
* 설정된 광고 발송 제한 시간 동안 광고 발송은 진행되지 않습니다.
    * 광고 발송 제한 시작 설정 가능 시간: 18:00~21:00
    * 광고 발송 제한 종료 설정 가능 시간: 08:00~12:00
* 미발송 메시지 처리 방식을 설정할 수 있습니다.
    * 실패 처리
* SMS, RCS의 광고성 메시지 발송 시간 제한 설정은 개별 설정이 필요합니다.

## Push

### 토큰 설정
#### 토큰 만료 기간 설정
* 설정한 기간 동안 등록 요청이 없는 토큰들을 주소록에서 삭제합니다.
* 오랜 기간동안 비활성화된 토큰에 메시지가 수신될 가능성은 극히 낮습니다. 
    * 비활성화 토큰이 발생하는 원인
        * 앱이 실제로 삭제되었지만 토큰은 남아있는 상태
        * 앱이 단말기에서 비활성화 처리되어 메시지 수신은 안되지만 토큰은 남아있는 상태
        * 앱에서 다른 새로운 토큰 등록했지만 기존 토큰이 남아있는 상태
* 기본값은 12개월입니다.
* 비활성화된 토큰은 발송 대상에서 제외되어 발송 요금을 절약할 수 있습니다.
* 비활성화된 토큰을 정리해 발송률, 수신율 정확도를 올릴 수 있습니다.

#### 앱 유형 설정
* 연동된 앱의 유형에 따라 토큰을 관리합니다.
* 다중 토큰
    * 기본 설정입니다. 하나의 수신자 별칭에 여러 개의 토큰이 등록될 수 있습니다.
    - 앱의 사용자가 여러 기기에 설치된 앱을 동시에 사용할 수 있는 앱이며, 한 사용자는 여러 개의 토큰을 가질 수 있습니다.
    - 예를 들어 사용자가 휴대폰과 태블릿을 사용한다면, 두 개의 토큰을 가질 수 있고, 휴대폰과 태블릿, 두 곳으로 푸시 메시지를 발송합니다.
* 단일 토큰
    - 사용자가 한 번에 한 기기에서만 앱을 사용할 수 있습니다. 한 사용자는 하나의 토큰만 가질 수 있습니다.
    - 예를 들어 사용자가 휴대폰과 태블릿을 사용한다면, 한 개의 토큰만 가질 수 있고, 둘 중 한 곳으로 푸시 메시지를 발송합니다.


## 첨부파일 관리

메시지 발송 시 첨부할 파일을 사전에 등록하여 관리할 수 있습니다. 

* **+첨부파일 업로드** 버튼을 클릭합니다. 
* 첨부파일 업로드 팝업에서 첨부파일을 사용할 메시지 채널을 선택합니다.
* **파일 선택** 버튼을 클릭하고 파일을 선택합니다. 
* **저장** 버튼을 눌러 파일을 업로드합니다. 
* 업로드하는 파일이 선택한 메시지 채널에 부적합한 경우 업로드가 실패하고 실패 원인이 표시됩니다.

첨부파일 보관 기한은 7일이며, 템플릿에서 사용 중인 첨부파일은 템플릿 삭제 전 까지 보관됩니다.
템플릿 등록 및 메시지 발송 시 업로드한 첨부파일도 관리할 수 있습니다.

# 통계

Notification Hub에서 발생하는 다양한 이벤트를 수집하고 통계 데이터로 조회할 수 있습니다.

## 통계 조회

발송된 메시지의 수신 결과를 수신자의 연락처 단위로 조회할 수 있습니다.

* 메시지 채널, 발송 시점(즉시, 예약), 발송 목적, 발송/수신/열람 상태를 복합적으로 설정해 연락처 수신 결과를 조회합니다.
* 조회 시 기간은 요청 일시 기준으로 설정합니다.
    * 조회 기간 설정 가능 범위은 기본, 최대 7일입니다.
    * 조회 기간은 최대 180일 전까지 가능합니다.
* 상세 조건 중 하나를 추가적으로 선택해 연락처 수신 결과를 조회할 수 있습니다.
    * 메시지 아이디, 템플릿 이름, 플로우 이름, 통계 키 이름, 발신 정보, 수신자 정보 

* 메시지 채널, 통계 기준, 통계 키, 메시지 아이디를 복합적으로 설정해 통계 데이터를 조회합니다.
* 설정한 메시지 채널에 따라 설정할 수 있는 통계 기준이 달라집니다.

### 메시지 채널, 통계 기준에 따른 통계 이벤트

| 메시지 채널 | 통계 기준 | 이벤트 | 비고 |
| - | - | - | - |
| 전체 | 메시지 | 요청됨(REQUESTED), 취소됨(CANCELED), 발송 성공(SENT), 발송 실패(SEND_FAILED), 수신 성공(DELIVERED), 수신 실패(DELIVERY_FAILED) | 발송 과정에서 발생한 이벤트입니다. |
| SMS | 메시지 | 요청됨(REQUESTED), 취소됨(CANCELED), 발송 성공(SENT), 발송 실패(SEND_FAILED), 수신 성공(DELIVERED), 수신 실패(DELIVERY_FAILED) | |
| RCS | 메시지 | 요청됨(REQUESTED), 취소됨(CANCELED), 발송 성공(SENT), 발송 실패(SEND_FAILED), 수신 성공(DELIVERED), 수신 실패(DELIVERY_FAILED) | |
| 알림톡 | 메시지 | 요청됨(REQUESTED), 취소됨(CANCELED), 발송 성공(SENT), 발송 실패(SEND_FAILED), 수신 성공(DELIVERED), 수신 실패(DELIVERY_FAILED) | |
| 친구톡 | 메시지 | 요청됨(REQUESTED), 취소됨(CANCELED), 발송 성공(SENT), 발송 실패(SEND_FAILED), 수신 성공(DELIVERED), 수신 실패(DELIVERY_FAILED) | |
| Push | 메시지 | 요청됨(REQUESTED), 취소됨(CANCELED), 발송 성공(SENT), 발송 실패(SEND_FAILED), 수신 성공(DELIVERED), 수신 실패(DELIVERY_FAILED), 열람됨(OPENED) | 메시지 열람에 대한 이벤트도 수집됩니다. |
| Email | 메시지 | 요청됨(REQUESTED), 취소됨(CANCELED), 발송 성공(SENT), 발송 실패(SEND_FAILED), 수신 성공(DELIVERED), 수신 실패(DELIVERY_FAILED), 열람됨(OPENED) | 메시지 열람에 대한 이벤트도 수집됩니다. |
| SMS | 국제 SMS 메시지 | 요청됨(REQUESTED), 취소됨(CANCELED), 발송 성공(SENT), 발송 실패(SEND_FAILED), 수신 성공(DELIVERED), 수신 실패(DELIVERY_FAILED) | |
| Push | 토큰 등록 | 등록됨(REGISTERED), 삭제(UNREGISTERED) | 주소록에 토큰이 등록되거나 삭제될 때 발생한 이벤트입니다. |
| Push | 수신 거부 | 전체 수신 거부(ALL_UNSUBSCRIBED), 야간 광고 수신 거부(NIGHT_AD_UNSUBSCRIBED), 광고 수신 거부(AD_UNSUBSCRIBED) | |

## 통계 키 관리

메시지 발송 시 통계 키를 설정하면 통계 조회에서 통계 키를 조회 조건으로 설정해 같은 통계 키로 발송된 메시지들의 통계 데이터를 조회할 수 있습니다.

* **+통계 키 추가** 버튼을 클릭합니다.
* 통계 키 이름, 상세 설명, 수집 기간을 설정합니다.
* 수집 기간을 무제한으로 설정할 수 있습니다. 
    * 기한이 없는 공지나 주기적인 발송이 필요한 메시지에 설정되는 통계 키가 해당 됩니다.
* 수집 기간이 되지 않았거나 수집 기간이 지난 통계 키로 발생한 이벤트는 수집되지 않습니다.
    * 특정 기간 동안 진행하는 캠페인이나 이벤트인 경우 수집 기한을 정해 통계 이벤트를 수집할 수 있습니다.


# 본인 인증

본인 인증 완료 후 Notification Hub를 사용할 수 있습니다. 본인 인증에 대한 자세한 내용은 **상품 사용 전 준비 사항** > **본인 인증** 항목을 확인 부탁드립니다.

* [본인 인증 가이드 바로가기](./preconditions#identity-verification)